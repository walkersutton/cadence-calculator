{% extends 'base.html' %}

{% block body %}

<h2>{{ title }}</h2>

{% if status == 'success' %}

<p>
    Successfully complete all steps for connecting your Strava account! Ride away!</br>Click <a href='/help'>here</a> to learn how the tool works.
</p>

{% elif status == 'good scope' %}
<p>
    Completed step 1/2 of connecting Strava account. One more step!
</p>
<form method="POST" action="/auth">
    {{ form.hidden_tag() }}
    {{ form.email }}
    {{ form.password }}
    <input type="submit" value="Verify">
</form>
{% elif status == 'bad scope' %}
<form method="POST" action="/auth">
    {{ form.hidden_tag() }}
    {{ form.email.label }}{{ form.email }}
    {{ form.password }}
    <input type="submit" value="Verify">
</form>
<p>
    You need to provide more access, try again
</p>
<a class='underline' href={{ auth_url }}>
    Authorize Cadence Calculator access to your Strava data
</a>
<h3>
    TODO - replace gif with gif providing all permissions needed
</h3>
<img class='gif' src={{ url_for('static', filename='images/auth.gif' ) }} alt='Give more permissions'>



{% elif status == 'missing creds' %}
<p>you are missing some credentials in the form. try again</p>
<form method="POST" action="/auth">
    {{ form.hidden_tag() }}
    {{ form.email.label }}{{ form.email }}
    {% if form.email.errors %}
    <ul class="errors">
    {% for error in form.email.errors %}
        <li>{{ error }}</li>
    {% endfor %}
    </ul>
    {% endif %}
    {{ form.password }}
    <ul class="errors">
    {% if form.password.errors %}
    {% for error in form.password.errors %}
        <li>{{ error }}</li>
    {% endfor %}
    </ul>
    {% endif %}
    <input type="submit" value="Verify">
</form>
{% elif status == 'error' %}
<p>There was an error, try again. If you continue to have issues, send us an email TODO</p>
{% else %}
<p>something went wrong. :(</p>
{% endif %}

{% endblock %}